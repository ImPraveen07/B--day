<html lang="en">
<head>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>College Wishlist - Instant photo film galerie</title>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Caveat");

    body {
      margin: 0;
      font-family: 'Caveat', serif;
      overflow: hidden;
      background: url('bg.jpeg') no-repeat center center fixed;
      background-size: cover;
      overscroll-behavior: none;
    }

    .zoom-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(1.05); /* Default Desktop Scale */
      transform-origin: center;
      width: 100vw;
      height: 100vh;
      pointer-events: none; /* Let clicks pass through to container, but re-enable on children */
    }

    .Container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: auto;
    }

    .yes-no-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, .3);
      border-radius: 3px;
    }

    .Picture1 {
      display: inline-block;
      position: absolute;
      top: 100px;
      left: 0;
      border: 5px solid #fff;
      border-radius: 3px;
      background: #fff;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
      transform: translate(-50%, -50%);
      user-select: none;
      cursor: grab;
      width: 800px;
      height: 900px;
      will-change: transform, top, left;
      transition: transform 0.1s ease-out;
      touch-action: none; 
    }

    .Picture {
      display: inline-block;
      position: absolute;
      top: 0;
      left: 0;
      border: 5px solid #fff;
      border-radius: 3px;
      background: #fff;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
      transform: translate(-50%, -50%);
      user-select: none;
      cursor: grab;
      width: 600px;
      height: 700px;
      will-change: transform, top, left;
      transition: transform 0.1s ease-out;
      touch-action: none; 
    }

    #smooth-card {
      width: 350px;
      height: 470px;
      transition: transform 0.1s ease-out, left 0.1s ease-out, top 0.1s ease-out;
    }

    .Picture-img {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: cover;
      pointer-events: none;
    }

    .yes-no-overlay p {
      font-size: 1.2rem;
      margin-bottom: 10px;
      text-align: center;
      padding: 0 10px;
    }

    .yes-no-overlay button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 14px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .yes-btn {
      background-color: #4caf50;
      color: white;
    }

    .no-btn {
      background-color: #f44336;
      color: white;
    }

    /* --- RESPONSIVE MOBILE SETTINGS --- */
    @media (max-width: 768px) {
      .zoom-container {
        /* Scale down the whole view on mobile so it fits the screen */
        transform: translate(-50%, -50%) scale(0.85); 
      }

      /* Force background pictures to be smaller on mobile so they don't look zoomed in */
      .Picture:not(#smooth-card) {
        width: 320px !important;
        height: 400px !important;
      }
      
      .Picture1 {
        width: 340px !important;
        height: 420px !important;
      }
    }
  </style>
</head>
<body>
  <div class="zoom-container">
    <div class="Container">
      
      <div class="Picture" id="smooth-card">
        <video class="Picture-img" autoplay loop muted controls playbackRate="1">
          <source src="v1.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>

        <div class="yes-no-overlay">
          <p>ùô∑ùô∞ùôøùôøùöà  ùôπùô¥ùôΩùô∏ùô≤H JEvicha 6,575 mathe-DAYüíÜüèª‚Äç‚ôÇÔ∏èüå†</p>
          </div>
      </div>

      <div class="Picture">
        <img class="Picture-img" src="b.jpg" alt="" />
      </div>
      <div class="Picture">
        <img class="Picture-img" src="e.jpg" alt="" />
      </div>   
      <div class="Picture">
        <img class="Picture-img" src="c.jpg" alt="" />
      </div>
          
      <div class="Picture">
        <img class="Picture-img" src="d.jpg" alt="" />
      </div>
      <div class="Picture">
        <img class="Picture-img" src="f.jpg" alt="" />
      </div>
      <div class="Picture">
        <img class="Picture-img" src="h.jpg" alt="" />
      </div>
    
      <div class="Picture">
        <img class="Picture-img" src="o.jpg" alt="" />
      </div>
      <div class="Picture">
        <img class="Picture-img" src="j.jpg" alt="" />
      </div>

      <div class="Picture">
        <img class="Picture-img" src="t.jpg" alt="" />
      </div>

      <div class="Picture">
        <img class="Picture-img" src="q.jpg" alt="" />
      </div>
                 
      <div class="Picture">
        <img class="Picture-img" src="r.jpg" alt="" />
      </div>
      <div class="Picture">
        <img class="Picture-img" src="s.jpg" alt="" />
      </div>
      <div class="Picture">
        <img class="Picture-img" src="i.jpg" alt="" />
      </div>
      
      <div class="Picture">
        <img class="Picture-img" src="g.jpg" alt="" />
      </div>
      <div class="Picture">
        <img class="Picture-img" src="m.jpg" alt="" />
      </div>
      <div class="Picture">
        <img class="Picture-img" src="a.jpg" alt="" />
      </div>
      <div class="Picture">
        <img class="Picture-img" src="n.jpg" alt="" />
      </div>
      <div class="Picture">
        <img class="Picture-img" src="p.jpg" alt="" />
      </div>
      <div class="Picture">
        <img class="Picture-img" src="y.jpg" alt="" />
      </div>
      <div class="Picture">
        <img class="Picture-img" src="l.jpg" alt="" />
      </div>
    </div>
  </div>

  <script>
    const pictures = document.querySelectorAll('.Picture');
    const smoothCard = document.getElementById('smooth-card');
    let previousTouch;
    
    // Helper function to get the current scale based on screen width
    // This ensures dragging speed is correct on both Mobile (0.85) and Desktop (1.05)
    function getScaleFactor() {
      return window.innerWidth <= 768 ? 0.85 : 1.05;
    }

    // Function to update position smoothly
    function updateSmoothElementPosition(element, event) {
      // Prevent browser default behavior to stop zooming/scrolling
      if(event.cancelable && event.type === 'touchmove') {
          event.preventDefault(); 
      }

      let movementX, movementY;
      const currentScale = getScaleFactor();

      if (event.type === 'touchmove') {
        const touch = event.touches[0];
        // Calculate difference and adjust by scaleFactor
        movementX = (previousTouch ? touch.clientX - previousTouch.clientX : 0) / currentScale;
        movementY = (previousTouch ? touch.clientY - previousTouch.clientY : 0) / currentScale;
        previousTouch = touch;
      } else {
        // For mouse, we also adjust by scaleFactor
        movementX = event.movementX / currentScale;
        movementY = event.movementY / currentScale;
      }

      const elementY = parseFloat(element.style.top || 0) + movementY;
      const elementX = parseFloat(element.style.left || 0) + movementX;

      element.style.top = elementY + 'px';
      element.style.left = elementX + 'px';
    }

    function startDragSmooth(element, event) {
      if(event.type === 'touchstart' && event.cancelable) {
          event.preventDefault(); 
      }
      
      const updateFunction = (event) => updateSmoothElementPosition(element, event);
      const stopFunction = () => stopDrag(updateFunction, stopFunction);

      document.addEventListener('mousemove', updateFunction);
      document.addEventListener('touchmove', updateFunction, { passive: false });
      document.addEventListener('mouseup', stopFunction);
      document.addEventListener('touchend', stopFunction);
    }

    function stopDrag(updateFunction, stopFunction) {
      previousTouch = undefined;
      document.removeEventListener('mousemove', updateFunction);
      document.removeEventListener('touchmove', updateFunction);
      document.removeEventListener('mouseup', stopFunction);
      document.removeEventListener('touchend', stopFunction);
    }

    smoothCard.addEventListener('mousedown', (event) => startDragSmooth(smoothCard, event));
    smoothCard.addEventListener('touchstart', (event) => {
      previousTouch = event.touches[0];
      startDragSmooth(smoothCard, event);
    }, { passive: false });

    // Randomize position for all images except smooth card
    pictures.forEach(picture => {
      if (picture !== smoothCard) {
        // Reduced random spread on mobile to keep items closer to center
        const isMobile = window.innerWidth <= 768;
        const range = isMobile ? 60 : 100; 
        
        const randomX = Math.random() * (range * 2) - range;
        const randomY = Math.random() * (range * 2) - range;
        const randomRotate = Math.random() * (range / 2) - range / 4;
        picture.style.top = `${randomY}px`;
        picture.style.left = `${randomX}px`;
        picture.style.transform = `translate(-50%, -50%) rotate(${randomRotate}deg)`;

        picture.addEventListener('mousedown', (event) => startDragSmooth(picture, event));
        picture.addEventListener('touchstart', (event) => {
          previousTouch = event.touches[0];
          startDragSmooth(picture, event);
        }, { passive: false });
      }
    });

    function sendMessage(response) {
      const email = "praveenpanangadan07@gmail.com";
      const subject = ":)";
      const body = `:) ${response}`;
      window.location.href = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    }

    window.onload = function() {
      const video = document.querySelector('#smooth-card video');
      if(video) {
        video.muted = true;
        video.play().catch(() => {
            video.muted = true;
            video.play();
        });
        video.playbackRate = 1; 
      }
    };

    function checkBirthdayEffect() {
        if (movedCards >= maxMoves) {
            triggerBirthdayEffect();
        }
    }
    let movedCards = 0;
    const maxMoves = 20;
    
    function triggerBirthdayEffect() {
      confetti({
        particleCount: 3000, 
        spread: 4000,         
        origin: { x: 0.5, y: 0.5 }, 
        scalar: 3,            
        angle: 90,            
        gravity: 0.6,         
        drift: 0,             
        shapes: ['square', 'circle',], 
        colors: ['#FF0000', '#FFFF00', '#0000FF', '#00FF00', '#FF1493', '#FFA500', '#800080', '#FFFFFF', '#FFD700'], 
        startVelocity: 100,    
        spread: 1000,         
        ticks: 300,           
        zIndex: 9999,         
      });

      let text = document.createElement("div");
      text.innerText = " Happy Birthday!üíó ";
      text.style.position = "absolute";
      text.style.top = "0%";
      text.style.left = "50%";
      text.style.transform = "translateX(-50%)";
      // Responsive text size
      text.style.fontSize = window.innerWidth <= 768 ? "3rem" : "4.5rem";
      text.style.fontWeight = "bold";
      text.style.color = "#FF4500";
      text.style.zIndex = "9999";
      text.style.animation = "fall 12s ease-in-out forwards"; 
      document.body.appendChild(text);

      setTimeout(() => {
        text.remove();
      }, 4000);  

      const style = document.createElement("style");
      style.innerHTML = `
        @keyframes fall {
          0% { top: 10%; opacity: 1; }
          100% { top: 80%; opacity: 0; }
        }
      `;
      document.head.appendChild(style);
    }

    pictures.forEach((picture, index) => {
      if (picture !== smoothCard) {
        picture.addEventListener('mousedown', (event) => {
          if (!picture.dataset.moved) {
            picture.dataset.moved = "true";
            movedCards++;
            checkBirthdayEffect();
          }
          startDragSmooth(picture, event);
        });

        picture.addEventListener('touchstart', (event) => {
          if (!picture.dataset.moved) {
            picture.dataset.moved = "true";
            movedCards++;
            checkBirthdayEffect();
          }
          previousTouch = event.touches[0];
          startDragSmooth(picture, event);
        }, { passive: false });
      }
    });
  </script>
</body>
</html>
